\documentclass[openany,11pt,vi,oneside]{mitthesis}
\usepackage{lgrind}
\usepackage{calc}
\usepackage{cmap}
\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{bm}
\usepackage{upgreek}
\usepackage{enumitem}
\usepackage{scrextend}
\usepackage{lscape}
\usepackage{geometry}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{xcolor}
\usepackage{float}
\usepackage{lscape}
\usepackage{tabu}
\usepackage{graphicx}
\usepackage{subcaption}
\usepackage{nameref}
%\usepackage{xifthen}
\usepackage{tikz}
\usepackage{matlab-prettifier}
\usepackage{listings}
\usepackage{mdframed}
\usepackage[hang, flushmargin]{footmisc}
\usepackage[colorlinks]{hyperref}
\usetikzlibrary{shapes,arrows.meta,calc}
\usepackage[backend=biber, style=numeric, maxcitenames=2, sorting=none, url=false, isbn=false, doi=true, eprint=false]{biblatex}
\hypersetup{citecolor={purple},linkcolor={blue}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% resources
\addbibresource{C:/Users/Jesse/Documents/tex/src/tex/latex/library.bib}
\graphicspath{{figs/}{figs/tikz/}{figs/tikz/algorithm/}}
\newcommand{\matlabdir}{C:/Users/Jesse/Documents/m/Research/wmlseg/workspace/}
\makeatletter\newcommand{\setmaxcitenames}[1]{\numdef\blx@maxcitenames{#1}}\makeatother
% layout
\geometry{margin=2cm}
\setlength{\parindent}{0pt}
\setlength{\parskip}{8pt}
\setlength{\skip\footins}{24pt}
\setlength{\footnotemargin}{0.8em}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% math shorthands
\renewcommand{\Re}{\mathbb{R}}
\newcommand{\xxx}{\mathrm{x}_1,\mathrm{x}_2,\mathrm{x}_3}
\newcommand{\gm}{\textsc{gm}}
\newcommand{\wm}{\textsc{wm}}
\newcommand{\csf}{\textsc{csf}}
\newcommand{\wmh}{\textsc{wmh}}
\newcommand{\mrf}{\textsc{mrf}}
\newcommand{\lr}{\textsc{lr}}
\newcommand{\sk}{\textsc{k}}
\newcommand{\sn}{\textsc{n}}
\newcommand{\sx}{\textsc{x}}
\newcommand{\sv}{\textsc{v}}
\newcommand{\sy}{\textsc{y}}
\renewcommand{\d}{\partial}
\renewcommand{\b}{\beta}
\newcommand{\bb}{\bm{\beta}}
\newcommand{\by}{\bm{y}}
\renewcommand{\L}{\mathcal{L}}
\newcommand{\N}{\mathcal{N}}
\newcommand{\J}{\mathcal{J}}
\newcommand{\Z}{\mathcal{Z}}
\newcommand{\Y}{\mathcal{Y}}
\newcommand{\C}{\mathcal{C}}
\newcommand{\x}{\mathcal{X}}
\newcommand{\bY}{\bm{\mathcal{Y}}}
\newcommand{\bC}{\bm{\mathcal{C}}}
\newcommand{\bV}{\bm{\mathcal{V}}}
\newcommand{\ep}{\circ}
\newcommand{\abs}[1]{\left|#1\right|}
\newcommand{\norm}[1]{\left|\left|#1\right|\right|}
\newcommand{\vox}[1]{\mathbb{#1}}
% colors
\definecolor{c01}{rgb}{1.00 0.00 0.00}
\definecolor{c02}{rgb}{1.00 0.38 0.00}
\definecolor{c03}{rgb}{1.00 0.75 0.00}
\definecolor{c04}{rgb}{0.13 0.80 0.00}
\definecolor{c05}{rgb}{0.00 0.80 0.80}
\definecolor{c06}{rgb}{0.00 0.50 1.00}
\definecolor{c07}{rgb}{0.00 0.20 1.00}
\definecolor{c08}{rgb}{0.50 0.00 1.00}
\definecolor{c09}{rgb}{1.00 0.00 1.00}
\definecolor{c10}{rgb}{0.50 0.50 0.50}
\definecolor{gry}{rgb}{0.50 0.50 0.50}
\definecolor{blue}{rgb}{0.00 0.30 1.00}
% little text items
\renewcommand{\ss}[1]{\textsuperscript{#1}}
\newcommand{\hreftt}[1]{\href{#1}{\footnotesize{\texttt{\lstinline|#1|}}}}
\newcommand{\et}{\thinspace}
\newcommand{\en}{\enspace}
\renewcommand\labelitemi{\raisebox{0.2em}{\fontsize{0.3em}{0}$\blacksquare$}}
\renewcommand\labelitemii{\raisebox{0.2em}{\fontsize{0.3em}{0}$\square$}}
\newcommand{\tablepost}[1]{\\[0.5em]\raggedright{\footnotesize{#1}}}
\newenvironment{subfigureside}[2][\sliceheight]{\begin{subfigure}{\textwidth}\centering\parbox[b][#1-1em][c]{1cm+\widthof{#2}}{\subcaption{#2}}}{\end{subfigure}}
% LaTeX penalties
\interfootnotelinepenalty=10000
\widowpenalty=500
\clubpenalty=500
% sizing
\newlength{\plotwidth}\setlength{\plotwidth}{0.48\textwidth}
\newlength{\sliceheight}\setlength{\sliceheight}{3.5cm}
\newlength{\fullheight}\setlength{\fullheight}{5cm}
\renewcommand*{\bibfont}{\footnotesize}
% appendix
\newcommand{\matlabsty}{\color{black}\ttfamily\footnotesize}
\global\mdfdefinestyle{graybar}{topline=false,rightline=false,bottomline=false,linewidth=0.2em,linecolor=lightgray,innertopmargin=0pt,innerbottommargin=0pt}
\lstnewenvironment{matlab}{\linespread{1}\mdframed[style=graybar]\lstset{style=Matlab-editor,basicstyle=\matlabsty,basewidth=0.5em}}{\endmdframed}
\newcommand{\includecode}[1]{\subsubsection[\ttfamily{#1}]{\hspace*{-1.5em}\ttfamily{>> #1}}\label{m:#1}%
  \begin{mdframed}[style=graybar]\lstinputlisting[style=Matlab-editor,basicstyle=\linespread{1}\matlabsty]{\matlabdir#1}\end{mdframed}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
  %\include{front}
	\include{contents}
  \include{ch-intro}
  \include{ch-method}
  \include{ch-exp}
  \include{ch-conc}
	\begin{singlespace}
    \printbibliography
  \end{singlespace}
  \appendix
  \include{ap-math}
  \include{ap-impl}
  \include{ap-code}
  %\include{ap-res}
\end{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
